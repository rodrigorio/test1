<!--BeginJsContent-->
<script type="text/javascript" src="utilidades/js-scripts/LABjs-1.2.0/LAB.min.js"></script>
<script type="text/javascript">
    $LAB
   .script("{pathUrlBase}"+"utilidades/jquery/jquery-1.5.1.min.js").wait()
   .script("{pathUrlBase}"+"utilidades/jquery/ui/jquery.bgiframe-2.1.2.js")
   .script("{pathUrlBase}"+"utilidades/jquery/ui/jquery-ui-1.8.11.custom.js")
   .script("{pathUrlBase}"+"utilidades/jquery/maxlength/maxlength.js")
   .script("{pathUrlBase}"+"utilidades/jquery/form/jquery.form.js")
   .script("{pathUrlBase}"+"utilidades/jquery/validate/jquery.validate.min.js")

   .script("{pathUrlBase}"+"gui/js/backEnd/libs/modernizr-1.7.min.js")
   .script("{pathUrlBase}"+"gui/js/backEnd/libs/selectivizr.js")
   .script("{pathUrlBase}"+"utilidades/jquery/jquery.facebox.js")
   .script("{pathUrlBase}"+"utilidades/jquery/jquery.tipsy.js")
   .script("{pathUrlBase}"+"utilidades/jquery/jquery.wysiwyg.js")
   .script("{pathUrlBase}"+"utilidades/jquery/jquery.datatables.js")
   .script("{pathUrlBase}"+"gui/js/backEnd/script.js")
   .script("{pathUrlBase}"+"gui/vistas/admin/parametros.js");
</script>
<!--EndJsContent-->

<!--BeginHeaderBlock-->
<article class="full-block clearfix">
    <header>
        <h2>Administracion Avanzada</h2>
    </header>
    <section>
        <h3>Administrar valores param&eacute;tricos din&aacute;micos del sistema. (DB / Session)</h3>
    </section>
</article>
<!--EndHeaderBlock-->

<!--BeginListadoParametrosBlock-->
<div class="subHeader01 mabo3">
    <a class="button-link blue" href="admin/parametros-form" rel="tooltip" original-title="Crear un nuevo parametro">Crear Nuevo Parametro</a>
</div>
<section id="listadoParametros">
    <div class="ajax_wait30 di_no"></div>
    <table class="datatable">
        <thead>
            <tr>
                <th>Grupo</th>
                <th>Key</th>
                <th>Tipo</th>
                <th>Descripcion</th>
                <th>Valor</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        <!--BeginParametroBlock-->
            <tr class="{iParametroId}">
                <td>{sGrupo}</td>
                <td>{sKey}</td>
                <td>{sTipo}</td>
                <td>{sDescripcion}</td>
                <td>{sValor}</td>
                <td class="teal_ce">
                    <span rel="{iParametroId}" class="i bs edit ihover editarParametro"></span>
                    <span rel="{iParametroId}" class="i bs delete ihover eliminarParametro"></span>
                </td>
            </tr>
        <!--EndParametroBlock-->
        <!--BeginNoRecordsParametrosBlock-->
            <tr>
                <td colspan="6">{sNoRecords}</td>
            </tr>
        <!--EndNoRecordsParametrosBlock-->
        </tbody>
    </table>
</section>
<!--EndListadoParametrosBlock-->

<!--BeginFormularioBlock-->
<article class="full-block clearfix">
    <div id='ajax_loading' class="ajax_wait30 di_no"></div>
    <header>
        <h2>{sTituloForm} Parametro Din&aacute;mico</h2>
    </header>

    <div style="display:none"  id='msg_form_parametro' class="notification">
        <a class="close-notification" rel="tooltip" href="#" original-title="Ocultar Notificacion">x</a>
        <p class="msg"></p>
    </div>
    <input type="hidden" value="{iParametroId}" name="iParametroId" id="iParametroId" />

    //los formularios aparte. uno para cada asociacion de parametro.
    //en el modificar se agrega solo el que va.
    //en el listado hay un UNION de las 3 tablas usuarios, controlador y sistema.

<h3 class="teta_up">{sTituloFormAccion} Acci&oacute;n</h3>
<div style="display:none"  id='msg_form_accion' class="notification">
    <a class="close-notification" rel="tooltip" href="#" original-title="Ocultar Notificacion">x</a>
    <p class="msg"></p>
</div>
<form id="formAccion" name="formAccion" action="" method="post">
    <div id='ajax_loading' class="ajax_wait30 di_no"></div>
        <!--BeginCamposCrearAccionBlock-->
        <dt>
            <label for="modulo">Modulo</label>
        </dt>
        <dd>
            <select name="modulo" id="modulo">
                <option value="">Elegir modulo</option>
                <option value="index" {sSelectedModuloIndex}>Index</option>
                <option value="comunidad" {sSelectedModuloComunidad}>Comunidad</option>
                <option value="seguimientos" {sSelectedModuloSeguimientos}>Seguimientos</option>
                <option value="admin" {sSelectedModuloAdmin}>Admin</option>
            </select>           
        </dd>
        <dt>
            <label for="controlador">Controlador</label>
        </dt>
        <dd>
            <input name="controlador" id="controlador" type="text" class="small" value="{sControlador}">
            <p>
                Cuidado, el nombre del controlador debe coincidir con el nombre de la clase<br>
                Ejemplo: si "class.InstitucionesControllerComunidad.php" entonces deberia ingresar 'comunidad' en el campo.<br>
                Si el controlador no existe en DB sera creado.<br>
                El controlador se elimina cuando se elimine la ultima accion asociada.
            </p>
        </dd>
        <!--EndCamposCrearAccionBlock-->

        <!--BeginCamposModificarAccionBlock-->
        <dt>
            <label>Modulo</label>
        </dt>
        <dd>
            <input readonly="readonly" name="modulo" id="modulo" type="text" class="small readonly" value="{sModulo}">
        </dd>
        <dt>
            <label>Controlador</label>
        </dt>
        <dd>
            <input readonly="readonly" name="controlador" id="controlador" type="text" class="small readonly" value="{sControlador}">
        </dd>
        <!--EndCamposModificarAccionBlock-->

        <dt>
            <label for="accion">Accion</label>
        </dt>
        <dd>
            <input name="accion" id="accion" type="text" class="small" value="{sAccion}">
            <p>
                El nombre de la accion debe corresponder con el nombre de un metodo para la clase del controller.<br>
                Se deben respetar mayusculas y minusculas.
            </p>
        </dd>
        <dt>
            <label for="perfil">Perfil</label>
        </dt>
        <dd>
            <select name="perfil" id="perfil">
                <option value="">Elegir Perfil</option>
                <option value="1" {sSelectedPerfilAdministrador}>Administrador</option>
                <option value="2" {sSelectedPerfilModerador}>Moderador</option>
                <option value="3" {sSelectedPerfilIntegranteActivo}>Integrante Activo</option>
                <option value="4" {sSelectedPerfilIntegranteInactivo}>Integrante Inactivo</option>
                <option value="5" {sSelectedPerfilVisitante}>Visitante</option>
            </select>
            <p>
                Los permisos se manejan por jerarquia:<br>
                Si elige <strong>'moderador'</strong> la accion podra ejecutarla tanto <strong>administradores</strong> como <strong>moderadores</strong><br>
                Si elige 'integrante activo' la accion sera permitida para administradores, moderadores e integrantes activos<br>
                Asi sucesivamente, la misma regla aplica para integrante activo y visitante.
            </p>
        </dd>
        <dt>
            <label for="activo">Acci&oacute;n Activa?</label>
        </dt>
        <dd>
            <select name="activo" id="activo">
                <option value="0" {sSelectedAccionDesactivada}>Desactivada</option>
                <option value="1" {sSelectedAccionActivada}>Activada</option>
            </select>
        </dd>
       
        <!--BeginSubmitCrearAccionBlock-->
        <button id="crearAccion" name="crearAccion" type="submit">Crear Accion</button>
        <!--EndSubmitCrearAccionBlock-->

        <!--BeginSubmitModificarAccionBlock-->
        <button id="modificarAccion" name="modificarAccion" type="submit">Modificar Accion</button>
        <input type="hidden" value="{iAccionId}" name="iAccionId" id="iAccionId" />
        <!--EndSubmitModificarAccionBlock-->
</form>
<!--EndFormularioBlock-->